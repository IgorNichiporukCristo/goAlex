{"version":3,"sources":["../src/mixins/addFocus.ts"],"names":["syntheticFocus","ruleset","focused","css","addFocus","lowPerformance","outlined","outlineSize","outlineOffset","outlineColor","buttonFocused","outlineRadius","synthesizeFocus"],"mappings":";;;;;;;AAAA;;AAGA;;AAEA;;AAyCO,IAAMA,cAA+B,GAAG,SAAlCA,cAAkC,CAACC,OAAD,EAAUC,OAAV;AAAA,aAAsBC,qBAAtB,iFAIrCF,OAJqC,EAOzCC,OAAO,IAAID,OAP8B;AAAA,CAAxC;AAUP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AACO,IAAMG,QAAgG,GAAG,SAAnGA,QAAmG;AAAA,MAC5GC,cAD4G,QAC5GA,cAD4G;AAAA,MAE5GH,OAF4G,QAE5GA,OAF4G;AAAA,2BAG5GI,QAH4G;AAAA,MAG5GA,QAH4G,8BAGjG,IAHiG;AAAA,8BAI5GC,WAJ4G;AAAA,MAI5GA,WAJ4G,iCAI9F,UAJ8F;AAAA,gCAK5GC,aAL4G;AAAA,MAK5GA,aAL4G,mCAK5FD,WAL4F;AAAA,+BAM5GE,YAN4G;AAAA,MAM5GA,YAN4G,kCAM7FC,qBAN6F;AAAA,gCAO5GC,aAP4G;AAAA,MAO5GA,aAP4G,mCAO5F,CAP4F;AAAA,kCAQ5GC,eAR4G;AAAA,MAQ5GA,eAR4G,qCAQ1FZ,cAR0F;AAAA,SAU5GM,QAAQ,QACRH,qBADQ,8OAQQK,aARR,EASSA,aATT,EAUUA,aAVV,EAWWA,aAXX,EAgBUD,WAhBV,EAiBiBI,aAjBjB,EAmBcN,cAAc,GAAG,OAAH,GAAa,6BAnBzC,EAwBFO,eAAe,KACbT,qBADa,8CAGeI,WAHf,EAG8BE,YAH9B,GAMbP,OANa,CAxBb,CAVoG;AAAA,CAAzG","sourcesContent":["import { css, FlattenSimpleInterpolation, InterpolationFunction } from 'styled-components';\n\nimport type { ThemeProps } from '../types';\nimport { buttonFocused } from '../tokens';\n\nimport 'focus-visible';\n\nexport interface FocusProps {\n    /**\n     * Компонент в фокусе\n     */\n    focused?: boolean;\n}\n\nexport interface OutlinedProps {\n    /**\n     * Добавить рамку при фокусе\n     */\n    outlined?: boolean;\n}\n\ntype SynthesizeFocus = (ruleset: FlattenSimpleInterpolation, focused?: boolean) => FlattenSimpleInterpolation;\n\nexport interface OutlineProps {\n    /**\n     * Размер фокусной рамки\n     */\n    outlineSize?: string;\n    /**\n     * Отступ фокусной рамки от родителя\n     */\n    outlineOffset?: string;\n    /**\n     * Цвет фокусной рамки\n     */\n    outlineColor?: string;\n    /**\n     * Радиус фокусной рамки\n     */\n    outlineRadius?: string;\n    /**\n     * Пользовательская функция синтетического фокуса\n     */\n    synthesizeFocus?: SynthesizeFocus;\n}\n\nexport const syntheticFocus: SynthesizeFocus = (ruleset, focused) => css`\n    &.focus-visible:focus,\n    &[data-focus-visible-added] {\n        outline: none;\n        ${ruleset}\n    }\n\n    ${focused && ruleset};\n`;\n\n/**\n * Миксин для добавления фокусной рамки к элементу через псевдоэлемент before\n * @param {FocusProps} props\n * @example\n * // Выведет фокусную рамку размером 2em, скруглением 5em, отступом 2em и цветом 'rebeccapurple'.\n * addFocus({\n *  outlineSize: '2em',\n *  outlineOffset: '2em',\n *  outlineRadius: '5em',\n *  outlineColor: 'rebeccapurple',\n * });\n * @example\n * // Выведет outline размером 4em, скруглением 10px 1px, без отступа и цветом 'greenyellow'.\n * addFocus({\n *  outlineSize: '4em',\n *  outlineOffset: '0',\n *  outlineRadius: '10em 1em',\n *  outlineColor: 'greenyellow',\n * });\n */\nexport const addFocus: InterpolationFunction<ThemeProps['theme'] & FocusProps & OutlinedProps & OutlineProps> = ({\n    lowPerformance,\n    focused,\n    outlined = true,\n    outlineSize = '0.125rem',\n    outlineOffset = outlineSize,\n    outlineColor = buttonFocused,\n    outlineRadius = 0,\n    synthesizeFocus = syntheticFocus,\n}) =>\n    outlined &&\n    css`\n        position: relative;\n\n        &::before {\n            content: '';\n\n            position: absolute;\n            top: -${outlineOffset};\n            left: -${outlineOffset};\n            right: -${outlineOffset};\n            bottom: -${outlineOffset};\n\n            display: block;\n            box-sizing: content-box;\n\n            border: ${outlineSize} solid transparent;\n            border-radius: ${outlineRadius};\n\n            transition: ${lowPerformance ? 'unset' : 'box-shadow 0.2s ease-in-out'};\n\n            pointer-events: none;\n        }\n\n        ${synthesizeFocus(\n            css`\n                &::before {\n                    box-shadow: 0 0 0 ${outlineSize} ${outlineColor};\n                }\n            `,\n            focused,\n        )}\n    `;\n"],"file":"addFocus.js"}