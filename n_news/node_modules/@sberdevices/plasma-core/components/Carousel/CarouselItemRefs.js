"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.CarouselItemRefs = void 0;

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

/**
 * Хранилище элементов карусели.
 */
var CarouselItemRefs = /*#__PURE__*/function () {
  function CarouselItemRefs() {
    _classCallCheck(this, CarouselItemRefs);

    _defineProperty(this, "items", []);
  }

  _createClass(CarouselItemRefs, [{
    key: "order",
    value: function order() {
      var _this$items$find, _this$items$find$curr, _this$items$find$curr2;

      var children = (_this$items$find = this.items.find(function (item) {
        var _item$current, _item$current$parentN;

        return (_item$current = item.current) === null || _item$current === void 0 ? void 0 : (_item$current$parentN = _item$current.parentNode) === null || _item$current$parentN === void 0 ? void 0 : _item$current$parentN.children;
      })) === null || _this$items$find === void 0 ? void 0 : (_this$items$find$curr = _this$items$find.current) === null || _this$items$find$curr === void 0 ? void 0 : (_this$items$find$curr2 = _this$items$find$curr.parentNode) === null || _this$items$find$curr2 === void 0 ? void 0 : _this$items$find$curr2.children;

      if (!children) {
        return;
      }

      var childrenArray = Array.from(children);
      this.items.sort(function (a, b) {
        var _a$current, _a$current$parentNode, _b$current, _b$current$parentNode;

        if ((_a$current = a.current) !== null && _a$current !== void 0 && (_a$current$parentNode = _a$current.parentNode) !== null && _a$current$parentNode !== void 0 && _a$current$parentNode.children && (_b$current = b.current) !== null && _b$current !== void 0 && (_b$current$parentNode = _b$current.parentNode) !== null && _b$current$parentNode !== void 0 && _b$current$parentNode.children) {
          return childrenArray.indexOf(a.current) - childrenArray.indexOf(b.current);
        }

        return 0;
      });
    }
  }, {
    key: "register",
    value: function register(ref) {
      this.items.push(ref);
      this.order();
      return this.items.length - 1;
    }
  }, {
    key: "unregister",
    value: function unregister(ref) {
      this.items.splice(this.items.indexOf(ref), 1);
      this.order();
    }
  }]);

  return CarouselItemRefs;
}();

exports.CarouselItemRefs = CarouselItemRefs;
//# sourceMappingURL=CarouselItemRefs.js.map