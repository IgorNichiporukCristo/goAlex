{"version":3,"sources":["../../src/components/Tabs/createTabsController.tsx"],"names":["Keys","createTabsController","ListComponent","Tabs","ItemComponent","TabItem","TabsController","ref","items","index","onIndexChange","rest","disabled","refs","TabItemRefs","onItemFocus","event","focusIndex","findIndex","itemRef","current","target","onKeyDown","minIndex","maxIndex","length","nextIndex","keyCode","end","left","right","home","preventDefault","focus","map","i","label","contentLeft"],"mappings":"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","sourcesContent":["import React, { forwardRef, ReactNode, useMemo, useCallback, FunctionComponent } from 'react';\n\nimport { TabItemRefs, TabsContext } from './TabsContext';\nimport { Tabs, TabsProps } from './Tabs';\nimport { TabItem, TabItemProps } from './TabItem';\n\nexport interface TabsControllerProps extends TabsProps {\n    items: Array<{ label: string; contentLeft?: ReactNode }>;\n    index: number;\n    onIndexChange: (index: number) => void;\n    children?: never;\n}\n\nenum Keys {\n    end = 35,\n    home = 36,\n    left = 37,\n    right = 39,\n}\n\n/**\n * Функция для создания `TabController`, которая дает возможность\n * кастомизировать стили, при этом сохраняя единый интерфейс и функционал.\n */\nexport function createTabsController<T extends HTMLDivElement, P extends TabsControllerProps>(\n    ListComponent = Tabs,\n    ItemComponent: FunctionComponent<TabItemProps> = TabItem,\n) {\n    // eslint-disable-next-line prefer-arrow-callback\n    return forwardRef<T, P>(function TabsController({ items, index, onIndexChange, ...rest }, ref) {\n        const { disabled } = rest;\n        const refs = useMemo(() => new TabItemRefs(), []);\n\n        const onItemFocus = useCallback(\n            (event) => {\n                if (disabled) {\n                    return;\n                }\n\n                const focusIndex = refs.items.findIndex((itemRef) => itemRef.current === event.target);\n\n                if (focusIndex !== index) {\n                    onIndexChange?.(focusIndex);\n                }\n            },\n            [refs, index, onIndexChange, disabled],\n        );\n\n        const onKeyDown = useCallback(\n            (event: KeyboardEvent) => {\n                if (disabled) {\n                    return;\n                }\n\n                const minIndex = 0;\n                const maxIndex = refs.items.length - 1;\n                let nextIndex;\n\n                switch (event.keyCode) {\n                    case Keys.end:\n                        nextIndex = maxIndex;\n                        break;\n                    case Keys.left:\n                        nextIndex = index > minIndex ? index - 1 : index;\n                        break;\n                    case Keys.right:\n                        nextIndex = index < maxIndex ? index + 1 : index;\n                        break;\n                    case Keys.home:\n                        nextIndex = minIndex;\n                        break;\n                    default:\n                        return;\n                }\n\n                if (nextIndex !== index) {\n                    event.preventDefault();\n                    refs.items[nextIndex].current?.focus();\n                }\n            },\n            [index, onIndexChange, disabled],\n        );\n\n        return (\n            <TabsContext.Provider value={{ refs }}>\n                <ListComponent ref={ref} onKeyDown={onKeyDown} {...rest}>\n                    {items.map(({ label, contentLeft }, i) => (\n                        <ItemComponent\n                            key={i}\n                            isActive={i === index}\n                            tabIndex={!disabled && i === index ? 0 : -1}\n                            contentLeft={contentLeft}\n                            onClick={() => onIndexChange?.(i)}\n                            onFocus={onItemFocus}\n                            disabled={disabled}\n                        >\n                            {label}\n                        </ItemComponent>\n                    ))}\n                </ListComponent>\n            </TabsContext.Provider>\n        );\n    });\n}\n"],"file":"createTabsController.js"}