{"version":3,"sources":["../src/utils/animatedScrollTo.ts"],"names":["DEFAULT_DURATION","tfs","linear","t","easeIn","Math","pow","easeOut","easeInOut","sin","PI","animatedScrollToX","elem","pos","duration","timingFunction","startTime","startX","scrollLeft","endX","max","min","scrollWidth","clientWidth","handleNewAnimationFrame","Date","now","timePos","scrollPos","left","scrollTo","window","requestAnimationFrame","animatedScrollToY","startY","scrollTop","endY","scrollHeight","clientHeight","top"],"mappings":"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","sourcesContent":["const DEFAULT_DURATION = 300;\n\n// https://css-tricks.com/emulating-css-timing-functions-javascript/\nconst tfs = {\n    linear: (t: number) => t,\n    // eslint-disable-next-line\n    easeIn: (t: number) => Math.pow(t, 1.675),\n    // eslint-disable-next-line\n    easeOut: (t: number) => 1 - Math.pow(1 - t, 1.675),\n    easeInOut: (t: number) => 0.5 * (Math.sin((t - 0.5) * Math.PI) + 1),\n};\n\nexport type TimingFunction = keyof typeof tfs;\n\n/**\n * Плавная прокрутка по горизонтали\n * @param {Element} elem\n * @param {number} pos\n * @param {number} duration\n * @param {string} timingFunction\n */\nexport const animatedScrollToX = (\n    elem: Element,\n    pos: number,\n    duration: number = DEFAULT_DURATION,\n    timingFunction: TimingFunction = 'easeInOut',\n): void => {\n    let startTime: number;\n    const startX = elem.scrollLeft;\n    const endX = Math.max(0, Math.min(elem.scrollWidth - elem.clientWidth, pos));\n\n    const handleNewAnimationFrame = (): void => {\n        startTime = startTime || Date.now();\n        const timePos = Math.min(1, Math.max(1, Date.now() - startTime) / duration);\n        const scrollPos = tfs[timingFunction](timePos);\n        const left = startX + (endX - startX) * scrollPos;\n        elem.scrollTo({ left });\n        if (timePos !== 1) window.requestAnimationFrame(handleNewAnimationFrame);\n    };\n\n    window.requestAnimationFrame(handleNewAnimationFrame);\n};\n\n/**\n * Плавная прокрутка по вертикали\n * @param {Element} elem\n * @param {number} pos\n * @param {number} duration\n * @param {string} timingFunction\n */\nexport const animatedScrollToY = (\n    elem: Element,\n    pos: number,\n    duration: number = DEFAULT_DURATION,\n    timingFunction: TimingFunction = 'easeInOut',\n): void => {\n    let startTime: number;\n    const startY = elem.scrollTop;\n    const endY = Math.max(0, Math.min(elem.scrollHeight - elem.clientHeight, pos));\n\n    const handleNewAnimationFrame = (): void => {\n        startTime = startTime || Date.now();\n        const timePos = Math.min(1, Math.max(1, Date.now() - startTime) / duration);\n        const scrollPos = tfs[timingFunction](timePos);\n        const top = startY + (endY - startY) * scrollPos;\n        elem.scrollTo({ top });\n        if (timePos !== 1) window.requestAnimationFrame(handleNewAnimationFrame);\n    };\n\n    window.requestAnimationFrame(handleNewAnimationFrame);\n};\n"],"file":"animatedScrollTo.js"}