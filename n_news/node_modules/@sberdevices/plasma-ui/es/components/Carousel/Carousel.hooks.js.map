{"version":3,"sources":["../../../src/components/Carousel/Carousel.hooks.tsx"],"names":["React","throttle","useRemoteListener","throttlingParamsDefault","leading","trailing","useCarouselContext","useCarouselItem","useRemoteHandlers","initialIndex","axis","delay","longDelay","min","max","count","longCount","throttlingParams","indexState","useState","setIndex","step","useCallback","cmd","prevIndex","jump","key","ev","preventDefault"],"mappings":"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","sourcesContent":["import React from 'react';\nimport throttle from 'lodash.throttle';\nimport { ScrollAxis } from '@sberdevices/plasma-core';\n\nimport { useRemoteListener } from '../../hooks';\n\nconst throttlingParamsDefault = {\n    leading: true,\n    trailing: false,\n};\n\nexport { useCarouselContext, useCarouselItem } from '@sberdevices/plasma-core';\n\n/**\n * Хук для навигации. Слушает нажатие кнопок на пульте/клавиатуре.\n */\nexport function useRemoteHandlers({\n    initialIndex = 0,\n    axis,\n    delay,\n    longDelay,\n    min,\n    max,\n    count = 1,\n    longCount = 5,\n    throttlingParams = throttlingParamsDefault,\n}: {\n    initialIndex: number;\n    axis: ScrollAxis;\n    delay: number;\n    longDelay: number;\n    min: number;\n    max: number;\n    count?: number;\n    longCount?: number;\n    throttlingParams?: typeof throttlingParamsDefault;\n}) {\n    const indexState = React.useState(initialIndex);\n    const [, setIndex] = indexState;\n\n    const step = React.useCallback(\n        throttle(\n            (cmd: '+' | '-') =>\n                setIndex((prevIndex) => {\n                    if (cmd === '+') {\n                        return prevIndex + count <= max ? prevIndex + count : min;\n                    }\n                    return prevIndex - count >= min ? prevIndex - count : max;\n                }),\n            delay,\n            throttlingParams,\n        ),\n        [min, max],\n    );\n    const jump = React.useCallback(\n        throttle(\n            (cmd: '+' | '-') =>\n                setIndex((prevIndex) => {\n                    if (cmd === '+') {\n                        return prevIndex + longCount <= max ? prevIndex + longCount : min;\n                    }\n                    return prevIndex - longCount >= min ? prevIndex - longCount : max;\n                }),\n            longDelay,\n            throttlingParams,\n        ),\n        [min, max],\n    );\n\n    useRemoteListener((key, ev) => {\n        ev.preventDefault();\n        if (axis === 'x') {\n            switch (key) {\n                case 'LEFT':\n                    step('-');\n                    break;\n                case 'RIGHT':\n                    step('+');\n                    break;\n                case 'LONG_LEFT':\n                    jump('-');\n                    break;\n                case 'LONG_RIGHT':\n                    jump('+');\n                    break;\n                default:\n                    break;\n            }\n        } else {\n            switch (key) {\n                case 'UP':\n                    step('-');\n                    break;\n                case 'DOWN':\n                    step('+');\n                    break;\n                case 'LONG_UP':\n                    jump('-');\n                    break;\n                case 'LONG_DOWN':\n                    jump('+');\n                    break;\n                default:\n                    break;\n            }\n        }\n    });\n\n    return indexState;\n}\n"],"file":"Carousel.hooks.js"}