{"version":3,"sources":["../../../src/components/Slider/SliderBase.tsx"],"names":["React","styled","css","ThemeContext","surfaceLiquid03","buttonAccent","scalingPixelBasis","sberPortalScale","handleDiameter","handleBorderWidth","railHeight","railBorderRadius","indentation","Slider","div","disabled","Rail","Fill","SliderBase","max","min","setStepSize","railFillWidth","children","railFillXPosition","ref","useRef","theme","useContext","useLayoutEffect","resizeHandler","current","rootElementFontSize","deviceScale","railSize","offsetWidth","totalSteps","window","addEventListener","removeEventListener","left","width"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,IAAiBC,GAAjB,EAAsBC,YAAtB,QAA0C,mBAA1C;AACA,SAASC,eAAT,EAA0BC,YAA1B,EAAwCC,iBAAxC,EAA2DC,eAA3D,QAAkF,4BAAlF;AAEA,OAAO,IAAMC,cAAc,GAAG,GAAvB;AACP,OAAO,IAAMC,iBAAiB,GAAG,MAA1B;AACP,OAAO,IAAMC,UAAU,GAAG,IAAnB;AACP,OAAO,IAAMC,gBAAgB,GAAGD,UAAU,GAAG,CAAtC;AACP,OAAO,IAAME,WAAW,GAAGJ,cAAc,GAAG,CAAjB,GAAqBC,iBAAzC;AAWP,IAAMI,MAAM,gBAAGZ,MAAM,CAACa,GAAV;AAAA;AAAA,gEAIN;AAAA,MAAGC,QAAH,QAAGA,QAAH;AAAA,SACEA,QAAQ,IACRb,GADQ,kBADV;AAAA,CAJM,CAAZ;AAWA,IAAMc,IAAI,gBAAGf,MAAM,CAACa,GAAV;AAAA;AAAA,kLAEIJ,UAFJ,EAGWC,gBAHX,EAIcP,eAJd,EAOSQ,WAPT,EAQUA,WARV,CAAV;AAYA,IAAMK,IAAI,gBAAGhB,MAAM,CAACa,GAAV;AAAA;AAAA,kFAKcT,YALd,CAAV;AASA,OAAO,IAAMa,UAAiC,GAAG,SAApCA,UAAoC,QAQ3C;AAAA,MAPFC,GAOE,SAPFA,GAOE;AAAA,MANFC,GAME,SANFA,GAME;AAAA,MALFC,WAKE,SALFA,WAKE;AAAA,MAJFC,aAIE,SAJFA,aAIE;AAAA,MAHFC,QAGE,SAHFA,QAGE;AAAA,oCAFFC,iBAEE;AAAA,MAFFA,iBAEE,sCAFkB,CAElB;AAAA,MADFT,QACE,SADFA,QACE;AACF,MAAMU,GAAG,GAAGzB,KAAK,CAAC0B,MAAN,CAAoC,IAApC,CAAZ;AACA,MAAMC,KAAK,GAAG3B,KAAK,CAAC4B,UAAN,CAAiBzB,YAAjB,CAAd;AAEAH,EAAAA,KAAK,CAAC6B,eAAN,CAAsB,YAAM;AACxB,QAAMC,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AACxB,UAAIL,GAAG,CAACM,OAAR,EAAiB;AAAA;;AACb,YAAMC,mBAAmB,GAAG,uBAACL,KAAD,aAACA,KAAD,uBAACA,KAAK,CAAEM,WAAR,mEAAuB1B,eAAvB,IAA0CD,iBAAtE;AACA,YAAM4B,QAAQ,GAAGT,GAAG,CAACM,OAAJ,CAAYI,WAAZ,GAA0BvB,WAAW,GAAGoB,mBAAd,GAAoC,CAA/E;AACA,YAAMI,UAAU,GAAGjB,GAAG,GAAGC,GAAzB;AACAC,QAAAA,WAAW,CAACa,QAAQ,GAAGE,UAAZ,CAAX;AACH;AACJ,KAPD;;AAQAN,IAAAA,aAAa;AACbO,IAAAA,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkCR,aAAlC;AACA,WAAO;AAAA,aAAMO,MAAM,CAACE,mBAAP,CAA2B,QAA3B,EAAqCT,aAArC,CAAN;AAAA,KAAP;AACH,GAZD,EAYG,CAACV,GAAD,EAAMD,GAAN,EAAWE,WAAX,CAZH;AAcA,sBACI,oBAAC,MAAD;AAAQ,IAAA,QAAQ,EAAEN,QAAlB;AAA4B,IAAA,GAAG,EAAEU;AAAjC,kBACI,oBAAC,IAAD,qBACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEe,MAAAA,IAAI,YAAKhB,iBAAL,OAAN;AAAkCiB,MAAAA,KAAK,YAAKnB,aAAL;AAAvC;AAAb,IADJ,CADJ,EAIKC,QAJL,CADJ;AAQH,CAlCM","sourcesContent":["import React from 'react';\nimport styled, { css, ThemeContext } from 'styled-components';\nimport { surfaceLiquid03, buttonAccent, scalingPixelBasis, sberPortalScale } from '@sberdevices/plasma-tokens';\n\nexport const handleDiameter = 1.5;\nexport const handleBorderWidth = 0.0625;\nexport const railHeight = 0.25;\nexport const railBorderRadius = railHeight / 2;\nexport const indentation = handleDiameter / 2 + handleBorderWidth;\n\ninterface SliderProps {\n    min: number;\n    max: number;\n    railFillWidth: number;\n    railFillXPosition?: number;\n    disabled?: boolean;\n    setStepSize(stepSize: number): void;\n}\n\nconst Slider = styled.div<{ disabled?: boolean }>`\n    position: relative;\n    height: 1.625rem;\n    user-select: none;\n    ${({ disabled }) =>\n        disabled &&\n        css`\n            opacity: 0.4;\n        `}\n`;\n\nconst Rail = styled.div`\n    position: relative;\n    height: ${railHeight}rem;\n    border-radius: ${railBorderRadius}rem;\n    background-color: ${surfaceLiquid03};\n    overflow: hidden;\n    top: 50%;\n    margin-left: ${indentation}rem;\n    margin-right: ${indentation}rem;\n    transform: translateY(-50%);\n`;\n\nconst Fill = styled.div`\n    position: absolute;\n    height: 100%;\n    top: 0;\n    left: 0;\n    background-color: ${buttonAccent};\n    width: 0;\n`;\n\nexport const SliderBase: React.FC<SliderProps> = ({\n    max,\n    min,\n    setStepSize,\n    railFillWidth,\n    children,\n    railFillXPosition = 0,\n    disabled,\n}) => {\n    const ref = React.useRef<HTMLDivElement | null>(null);\n    const theme = React.useContext(ThemeContext);\n\n    React.useLayoutEffect(() => {\n        const resizeHandler = () => {\n            if (ref.current) {\n                const rootElementFontSize = (theme?.deviceScale ?? sberPortalScale) * scalingPixelBasis;\n                const railSize = ref.current.offsetWidth - indentation * rootElementFontSize * 2;\n                const totalSteps = max - min;\n                setStepSize(railSize / totalSteps);\n            }\n        };\n        resizeHandler();\n        window.addEventListener('resize', resizeHandler);\n        return () => window.removeEventListener('resize', resizeHandler);\n    }, [min, max, setStepSize]);\n\n    return (\n        <Slider disabled={disabled} ref={ref}>\n            <Rail>\n                <Fill style={{ left: `${railFillXPosition}px`, width: `${railFillWidth}px` }} />\n            </Rail>\n            {children}\n        </Slider>\n    );\n};\n"],"file":"SliderBase.js"}