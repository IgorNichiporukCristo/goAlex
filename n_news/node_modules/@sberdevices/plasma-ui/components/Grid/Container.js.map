{"version":3,"sources":["../../src/components/Grid/Container.tsx"],"names":["sidesCount","htmlFontSizePx","StyledContainer","BaseContainer","$width","theme","gridSizes","map","breakpoint","containerWidth","margins","gridMargins","gridGutters","deviceScale","css","gridColumns","Container","children","props","ref","React","useRef","useState","width","setWidth","resizeHandler","current","offsetWidth","canUseDOM","window","addEventListener","removeEventListener"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAeA,IAAMA,UAAU,GAAG,CAAnB;AACA,IAAMC,cAAc,GAAG,EAAvB;AAEA,IAAMC,eAAe,gBAAG,kCAAOC,qBAAP,CAAH;AAAA;AAAA,aACf;AAAA,MAAGC,MAAH,QAAGA,MAAH;AAAA,MAAWC,KAAX,QAAWA,KAAX;AAAA,SACEC,sBAAUC,GAAV,CAAc,UAACC,UAAD,EAAgB;AAC1B,QAAMC,cAAc,GAAGL,MAAvB;AACA,QAAMM,OAAO,GACT,CAACC,wBAAYH,UAAZ,IAA0BR,UAA1B,GAAuCY,wBAAYJ,UAAZ,CAAxC,IAAmEP,cAAnE,GAAoFI,KAAK,CAACQ,WAD9F;AAGA,WAAO,4BACHL,UADG,EAEHH,KAAK,CAACQ,WAFH,MAGLC,qBAHK,oGAI2B,CAACL,cAAc,GAAGC,OAAlB,IAA6BK,wBAAYP,UAAZ,CAJxD,EAKqBG,wBAAYH,UAAZ,CALrB,EAMqBI,wBAAYJ,UAAZ,IAA0BR,UAN/C,EAAP;AAQH,GAbD,CADF;AAAA,CADe,CAArB;AAkBA;AACA;AACA;AACA;;AACO,IAAMgB,SAAyD,GAAG,SAA5DA,SAA4D,QAA4B;AAAA,MAAzBC,QAAyB,SAAzBA,QAAyB;AAAA,MAAZC,KAAY;;AACjG,MAAMC,GAAG,GAAGC,kBAAMC,MAAN,CAAoC,IAApC,CAAZ;;AACA,wBAA0BD,kBAAME,QAAN,CAAe,CAAf,CAA1B;AAAA;AAAA,MAAOC,KAAP;AAAA,MAAcC,QAAd;;AAEA,6CAA0B,YAAM;AAC5B,QAAMC,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AACxB,UAAIN,GAAG,CAACO,OAAR,EAAiB;AAAA;;AACbF,QAAAA,QAAQ,iBAACL,GAAG,CAACO,OAAL,iDAAC,aAAaC,WAAd,CAAR;AACH;AACJ,KAJD;;AAKA,QAAIR,GAAG,CAACO,OAAR,EAAiB;AAAA;;AACbF,MAAAA,QAAQ,kBAACL,GAAG,CAACO,OAAL,kDAAC,cAAaC,WAAd,CAAR;AACH;;AACD,QAAIC,qBAAJ,EAAe;AACXC,MAAAA,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkCL,aAAlC;AACH;;AACD,WAAO,YAAM;AACT,UAAIG,qBAAJ,EAAe;AACXC,QAAAA,MAAM,CAACE,mBAAP,CAA2B,QAA3B,EAAqCN,aAArC;AACH;AACJ,KAJD;AAKH,GAjBD,EAiBG,EAjBH;AAmBA,sBACI,gCAAC,eAAD;AAAiB,IAAA,GAAG,EAAEN,GAAtB;AAA2B,IAAA,MAAM,EAAEI;AAAnC,KAA8CL,KAA9C,GACKD,QADL,CADJ;AAKH,CA5BM","sourcesContent":["import React from 'react';\nimport styled, { css } from 'styled-components';\nimport {\n    Container as BaseContainer,\n    mediaQuery,\n    gridSizes,\n    gridColumns,\n    gridMargins,\n    gridGutters,\n    canUseDOM,\n    useIsomorphicLayoutEffect,\n} from '@sberdevices/plasma-core';\n\ninterface StyledContainerProps {\n    $width: number;\n}\n\nconst sidesCount = 2;\nconst htmlFontSizePx = 16;\n\nconst StyledContainer = styled(BaseContainer)<StyledContainerProps>`\n    ${({ $width, theme }) =>\n        gridSizes.map((breakpoint) => {\n            const containerWidth = $width;\n            const margins =\n                (gridMargins[breakpoint] * sidesCount - gridGutters[breakpoint]) * htmlFontSizePx * theme.deviceScale;\n\n            return mediaQuery(\n                breakpoint,\n                theme.deviceScale,\n            )(css`\n                --plasma-grid-column-width: ${(containerWidth - margins) / gridColumns[breakpoint]}px;\n                --plasma-grid-margin: ${gridMargins[breakpoint]}rem;\n                --plasma-grid-gutter: ${gridGutters[breakpoint] / sidesCount}rem;\n            `);\n        })}\n`;\n\n/**\n * Блок с полями по бокам для размещения контента по вертикали.\n * Блок нельзя вкладывать сам в себя или дальше по дереву.\n */\nexport const Container: React.FC<React.HTMLAttributes<HTMLDivElement>> = ({ children, ...props }) => {\n    const ref = React.useRef<HTMLDivElement | null>(null);\n    const [width, setWidth] = React.useState(0);\n\n    useIsomorphicLayoutEffect(() => {\n        const resizeHandler = () => {\n            if (ref.current) {\n                setWidth(ref.current?.offsetWidth);\n            }\n        };\n        if (ref.current) {\n            setWidth(ref.current?.offsetWidth);\n        }\n        if (canUseDOM) {\n            window.addEventListener('resize', resizeHandler);\n        }\n        return () => {\n            if (canUseDOM) {\n                window.removeEventListener('resize', resizeHandler);\n            }\n        };\n    }, []);\n\n    return (\n        <StyledContainer ref={ref} $width={width} {...props}>\n            {children}\n        </StyledContainer>\n    );\n};\n"],"file":"Container.js"}