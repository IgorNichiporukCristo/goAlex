{"version":3,"sources":["../../src/components/Tabs/TabsSlider.tsx"],"names":["activeItemStyle","css","surfaceCard","StyledSlider","styled","div","disabled","theme","lowPerformance","TabsSlider","index","rest","left","width","height","dimensions","setDimensions","refs","undefined","activeTab","items","current","resizeObserver","window","ResizeObserver","style","getComputedStyle","offsetWidth","offsetLeft","parseInt","marginLeft","offsetHeight","observe","box","unobserve"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;AAOO,IAAMA,eAAe,oBAAGC,qBAAH,8EACJC,uBADI,CAArB;;;AAMA,IAAMC,YAAY,gBAAGC,6BAAOC,GAAV;AAAA;AAAA,wIAOP;AAAA,MAAGC,QAAH,QAAGA,QAAH;AAAA,MAAaC,KAAb,QAAaA,KAAb;AAAA,SACVD,QAAQ,IAAIC,KAAK,CAACC,cAAlB,GAAmC,OAAnC,GAA6C,+CADnC;AAAA,CAPO,EASnBR,eATmB,CAAlB;AAcP;AACA;AACA;;;;;AACO,IAAMS,UAAiC,GAAG,SAApCA,UAAoC,QAAwB;AAAA,MAArBC,KAAqB,SAArBA,KAAqB;AAAA,MAAXC,IAAW;;AACrE,kBAAoC,qBAAS;AAAEC,IAAAA,IAAI,EAAE,CAAR;AAAWC,IAAAA,KAAK,EAAE,CAAlB;AAAqBC,IAAAA,MAAM,EAAE;AAA7B,GAAT,CAApC;AAAA;AAAA,MAAOC,UAAP;AAAA,MAAmBC,aAAnB;;AACA,8BAAiB,oDAAjB;AAAA,MAAQC,IAAR,yBAAQA,IAAR;;AAEA,wBAAU,YAAM;AACZ,QAAI,CAACA,IAAD,IAASP,KAAK,KAAKQ,SAAvB,EAAkC;AAC9B;AACH;;AAED,QAAMC,SAAS,GAAGF,IAAI,CAACG,KAAL,CAAWV,KAAX,EAAkBW,OAApC;;AAEA,QAAI,CAACF,SAAL,EAAgB;AACZ;AACH;;AAED,QAAMG,cAAc,GAAG,IAAIC,MAAM,CAACC,cAAX,CAA0B,YAAM;AACnD,UAAMC,KAAK,GAAGC,gBAAgB,CAACP,SAAD,CAA9B;AAEAH,MAAAA,aAAa,CAAC;AACVH,QAAAA,KAAK,EAAEM,SAAS,CAACQ,WADP;AAEVf,QAAAA,IAAI,EAAEO,SAAS,CAACS,UAAV,GAAuBC,QAAQ,CAACJ,KAAK,CAACK,UAAP,EAAmB,EAAnB,CAF3B;AAGVhB,QAAAA,MAAM,EAAEK,SAAS,CAACY;AAHR,OAAD,CAAb;AAKH,KARsB,CAAvB;AAUAT,IAAAA,cAAc,CAACU,OAAf,CAAuBb,SAAvB,EAAkC;AAAEc,MAAAA,GAAG,EAAE;AAAP,KAAlC;AAEA,WAAO,YAAM;AACTX,MAAAA,cAAc,CAACY,SAAf,CAAyBf,SAAzB;AACH,KAFD;AAGH,GA1BD,EA0BG,CAACT,KAAD,CA1BH;AA4BA,sBAAO,gCAAC,YAAD;AAAc,IAAA,KAAK,EAAEK;AAArB,KAAqCJ,IAArC,EAAP;AACH,CAjCM","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport styled, { css } from 'styled-components';\nimport { surfaceCard } from '@sberdevices/plasma-core';\n\nimport { useTabsAnimationContext } from './TabsAnimationContext';\n\nexport interface SliderProps extends React.HTMLAttributes<HTMLDivElement> {\n    index?: number;\n    disabled?: boolean;\n}\n\nexport const activeItemStyle = css`\n    background-color: ${surfaceCard};\n    /* stylelint-disable-next-line number-max-precision */\n    box-shadow: 0 0.0625rem 0.25rem rgba(0, 0, 0, 0.05);\n`;\n\nexport const StyledSlider = styled.div<Pick<SliderProps, 'disabled'>>`\n    position: absolute;\n    z-index: -1;\n\n    min-width: 0%;\n    border-radius: var(--tab-item-border-radius);\n\n    transition: ${({ disabled, theme }) =>\n        disabled || theme.lowPerformance ? 'unset' : 'left 0.2s ease-in-out, width 0.2s ease-in-out'};\n    ${activeItemStyle};\n\n    pointer-events: none;\n`;\n\n/**\n * Слайдер переключения табов\n */\nexport const TabsSlider: React.FC<SliderProps> = ({ index, ...rest }) => {\n    const [dimensions, setDimensions] = useState({ left: 0, width: 0, height: 0 });\n    const { refs } = useTabsAnimationContext();\n\n    useEffect(() => {\n        if (!refs || index === undefined) {\n            return;\n        }\n\n        const activeTab = refs.items[index].current;\n\n        if (!activeTab) {\n            return;\n        }\n\n        const resizeObserver = new window.ResizeObserver(() => {\n            const style = getComputedStyle(activeTab);\n\n            setDimensions({\n                width: activeTab.offsetWidth,\n                left: activeTab.offsetLeft - parseInt(style.marginLeft, 10),\n                height: activeTab.offsetHeight,\n            });\n        });\n\n        resizeObserver.observe(activeTab, { box: 'border-box' });\n\n        return () => {\n            resizeObserver.unobserve(activeTab);\n        };\n    }, [index]);\n\n    return <StyledSlider style={dimensions} {...rest} />;\n};\n"],"file":"TabsSlider.js"}