{"version":3,"sources":["../../src/components/Checkbox/Checkbox.tsx"],"names":["syntheticFocus","ruleset","focused","css","StyledRoot","BaseboxRoot","$disabled","StyledInput","BaseboxInput","StyledTrigger","BaseboxTrigger","transparent","tertiary","accent","buttonSecondary","white","outlineRadius","synthesizeFocus","outlineOffset","StyledContent","BaseboxContent","StyledLabel","BaseboxLabel","StyledDescription","BaseboxDescription","StyledDone","Done","StyledIndeterminate","Indeterminate","Checkbox","ref","id","label","description","indeterminate","disabled","style","className","ariaLabelExternal","rest","inputRef","forkRef","React","useEffect","current","Boolean","uniqId","uniqLabelId","uniqDescriptionId","checkboxId","ariaLabel"],"mappings":"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","sourcesContent":["import React, { forwardRef, useRef, useMemo } from 'react';\nimport styled, { css, FlattenSimpleInterpolation } from 'styled-components';\nimport {\n    BaseboxRoot,\n    BaseboxInput,\n    BaseboxTrigger,\n    BaseboxContent,\n    BaseboxContentWrapper,\n    BaseboxLabel,\n    BaseboxDescription,\n    accent,\n    buttonSecondary,\n    tertiary,\n    white,\n    transparent,\n    useForkRef,\n    useUniqId,\n    addFocus,\n} from '@sberdevices/plasma-core';\nimport type { BaseboxProps } from '@sberdevices/plasma-core';\n\nimport { extractTextFrom } from '../../utils';\n\nimport { Done, Indeterminate } from './Icons';\n\nexport interface CheckboxProps extends BaseboxProps {\n    /**\n     * Неопределенное состояние компонента - когда часть потомков не выбрана.\n     */\n    indeterminate?: boolean;\n}\n\nexport const syntheticFocus = (ruleset: FlattenSimpleInterpolation, focused?: boolean) => css`\n    input[data-focus-visible-added] + label & {\n        outline: none;\n        ${ruleset}\n    }\n\n    ${focused && ruleset};\n`;\nexport const StyledRoot = styled(BaseboxRoot)<{ $disabled?: boolean }>`\n    /* stylelint-disable-next-line number-max-precision */\n    margin-left: 0.1875rem; /* FixMe: Выпилить, v2.0 Привести к единому стилю с UI */\n    /* stylelint-disable-next-line number-max-precision */\n    margin-bottom: 0.1875rem; /* FixMe: Выпилить, v2.0 Привести к единому стилю с UI */\n\n    ${({ $disabled }) => $disabled && 'cursor: not-allowed;'}\n`;\nexport const StyledInput = styled(BaseboxInput)`\n    /* Спрятать от IE */\n    width: 1px;\n    height: 1px;\n    overflow: hidden;\n    clip: rect(0 0 0 0);\n`;\n\nexport const StyledTrigger = styled(BaseboxTrigger)<{ outlineRadius?: string }>`\n    /* stylelint-disable-next-line number-max-precision */\n    margin: 0.1875rem 0; /* FixMe: Выпилить, v2.0 Привести к единому стилю с UI */\n    width: 1.125rem;\n    height: 1.125rem;\n\n    background: ${transparent};\n    border: 0.125rem solid ${tertiary};\n    border-radius: 0.25rem;\n    color: ${tertiary};\n    flex-shrink: 0;\n    flex-grow: 0;\n\n    /* stylelint-disable-next-line */\n    input[type='checkbox']:indeterminate + label & {\n        background: ${transparent};\n        border-color: ${accent};\n        color: ${accent};\n    }\n\n    /* stylelint-disable-next-line */\n    input:disabled + label & {\n        background: ${buttonSecondary};\n        border-color: ${transparent};\n        color: ${transparent};\n        cursor: inherit;\n    }\n\n    /* stylelint-disable-next-line */\n    input:checked + label & {\n        background: ${accent};\n        border-color: ${accent};\n        color: ${white};\n    }\n\n    /* stylelint-disable-next-line */\n    input:checked:disabled + label & {\n        background: ${buttonSecondary};\n        border-color: ${transparent};\n        color: ${tertiary};\n    }\n\n    ${({ outlineRadius = '0.25rem' }) => css`\n        ${addFocus({\n            synthesizeFocus: syntheticFocus,\n            outlineOffset: '0.25rem',\n            outlineRadius,\n        })}\n    `}\n`;\nexport const StyledContent = styled(BaseboxContent)`\n    margin-left: 0.875rem;\n\n    /* stylelint-disable-next-line */\n    input:disabled + label & {\n        opacity: 0.4;\n    }\n`;\nexport const StyledLabel = styled(BaseboxLabel)`\n    line-height: 1.5rem;\n`;\nexport const StyledDescription = styled(BaseboxDescription)`\n    /* stylelint-disable-next-line */\n    input:disabled + label & {\n        opacity: 0.4;\n    }\n`;\nconst StyledDone = styled(Done)`\n    position: absolute;\n    top: -0.125rem;\n    left: -0.125rem;\n\n    transform: scale(0);\n    transition: transform 0.15s ease-in-out;\n\n    /* stylelint-disable-next-line */\n    input:checked + label ${BaseboxTrigger} & {\n        transform: scale(1);\n    }\n`;\nconst StyledIndeterminate = styled(Indeterminate)`\n    position: absolute;\n    top: -0.125rem;\n    left: -0.125rem;\n`;\n\n/**\n * Флажок или *чекбокс*. Позволяет пользователю управлять параметром с двумя состояниями — ☑ включено и ☐ отключено.\n */\n// eslint-disable-next-line prefer-arrow-callback\nexport const Checkbox = forwardRef<HTMLInputElement, CheckboxProps>(function Checkbox(\n    { id, label, description, indeterminate, disabled, style, className, 'aria-label': ariaLabelExternal, ...rest },\n    ref,\n) {\n    const inputRef = useRef<HTMLInputElement | null>(null);\n    const forkRef = useForkRef(inputRef, ref);\n\n    React.useEffect(() => {\n        if (inputRef.current) {\n            inputRef.current.indeterminate = Boolean(indeterminate);\n        }\n    }, [inputRef, indeterminate]);\n\n    const uniqId = useUniqId();\n    const uniqLabelId = useUniqId();\n    const uniqDescriptionId = useUniqId();\n    const checkboxId = id || uniqId;\n    const ariaLabel = useMemo(() => ariaLabelExternal || extractTextFrom(label), [ariaLabelExternal, label]);\n\n    return (\n        <StyledRoot $disabled={disabled} style={style} className={className} tabIndex={-1}>\n            <StyledInput\n                {...rest}\n                id={checkboxId}\n                ref={forkRef}\n                type=\"checkbox\"\n                disabled={disabled}\n                aria-label={ariaLabel}\n                aria-describedby={uniqDescriptionId}\n            />\n            <BaseboxContentWrapper htmlFor={checkboxId}>\n                <StyledTrigger>{indeterminate ? <StyledIndeterminate /> : <StyledDone />}</StyledTrigger>\n                {label && (\n                    <StyledContent>\n                        <StyledLabel as=\"span\" id={uniqLabelId} aria-hidden={typeof label === 'string'}>\n                            {label}\n                        </StyledLabel>\n                        {description && (\n                            <BaseboxDescription mt={4} id={uniqDescriptionId}>\n                                {description}\n                            </BaseboxDescription>\n                        )}\n                    </StyledContent>\n                )}\n            </BaseboxContentWrapper>\n        </StyledRoot>\n    );\n});\n"],"file":"Checkbox.js"}