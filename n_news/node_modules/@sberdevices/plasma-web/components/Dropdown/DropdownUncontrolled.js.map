{"version":3,"sources":["../../src/components/Dropdown/DropdownUncontrolled.tsx"],"names":["DropdownUncontrolled","id","isOpen","items","children","offsetTop","disabled","style","className","hoverIndex","placement","trigger","onBlur","onKeyDown","onToggleExternal","onToggle","onItemSelect","rest","hasItems","Array","isArray","length","newIsOpen","event"],"mappings":";;;;;;;;;AAAA;;AAKA;;AACA;;;;;;;;;;;;;;AAUA;AACA;AACA;AACO,IAAMA,oBAAmD,GAAG,SAAtDA,oBAAsD,OAiB7D;AAAA,MAhBFC,EAgBE,QAhBFA,EAgBE;AAAA,MAfFC,MAeE,QAfFA,MAeE;AAAA,MAdFC,KAcE,QAdFA,KAcE;AAAA,MAbFC,QAaE,QAbFA,QAaE;AAAA,MAZFC,SAYE,QAZFA,SAYE;AAAA,MAXFC,QAWE,QAXFA,QAWE;AAAA,MAVFC,KAUE,QAVFA,KAUE;AAAA,MATFC,SASE,QATFA,SASE;AAAA,MARFC,UAQE,QARFA,UAQE;AAAA,4BAPFC,SAOE;AAAA,MAPFA,SAOE,+BAPU,QAOV;AAAA,0BANFC,OAME;AAAA,MANFA,OAME,6BANQ,OAMR;AAAA,MALFC,MAKE,QALFA,MAKE;AAAA,MAJFC,SAIE,QAJFA,SAIE;AAAA,MAHQC,gBAGR,QAHFC,QAGE;AAAA,MAFFC,YAEE,QAFFA,YAEE;AAAA,MADCC,IACD;;AACF,MAAMC,QAAQ,GAAGC,KAAK,CAACC,OAAN,CAAcjB,KAAd,KAAwBA,KAAK,CAACkB,MAAN,GAAe,CAAxD;AAEA,MAAMN,QAAQ,GAAG,wBACb,UAACO,SAAD,EAAYC,KAAZ,EAAsB;AAClB,QAAID,SAAS,IAAIJ,QAAb,IAAyB,CAACZ,QAA9B,EAAwC;AACpCQ,MAAAA,gBAAgB,SAAhB,IAAAA,gBAAgB,WAAhB,YAAAA,gBAAgB,CAAG,IAAH,EAASS,KAAT,CAAhB;AACH,KAFD,MAEO;AACHT,MAAAA,gBAAgB,SAAhB,IAAAA,gBAAgB,WAAhB,YAAAA,gBAAgB,CAAG,KAAH,EAAUS,KAAV,CAAhB;AACH;AACJ,GAPY,EAQb,CAACT,gBAAD,EAAmBR,QAAnB,EAA6BY,QAA7B,CARa,CAAjB;AAWA,sBACI,gCAAC,4BAAD;AACI,IAAA,MAAM,EAAEhB,MADZ;AAEI,IAAA,OAAO,EAAES,OAFb;AAGI,IAAA,SAAS,EAAED,SAHf;AAII,IAAA,UAAU,EAAEN,QAJhB;AAKI,IAAA,SAAS,EAAEC,SALf;AAMI,IAAA,KAAK,EAAEE,KANX;AAOI,IAAA,SAAS,EAAEC,SAPf;AAQI,IAAA,QAAQ,EAAEO,QARd;AASI,IAAA,SAAS,EAAEF,SATf;AAUI,IAAA,MAAM,EAAED;AAVZ,kBAYI,gCAAC,0BAAD,eAAkBK,IAAlB;AAAwB,IAAA,EAAE,EAAEhB,EAA5B;AAAgC,IAAA,KAAK,EAAEE,KAAvC;AAA8C,IAAA,UAAU,EAAEM,UAA1D;AAAsE,IAAA,YAAY,EAAEO;AAApF,KAZJ,CADJ;AAgBH,CA/CM","sourcesContent":["import React, { FC, useCallback } from 'react';\nimport type { DisabledProps } from '@sberdevices/plasma-core';\n\nimport { PickOptional } from '../../types';\n\nimport { DropdownMenu, DropdownMenuProps } from './DropdownMenu';\nimport { DropdownPopup, DropdownPopupProps } from './DropdownPopup';\n\nexport interface DropdownUncontrolledProps\n    extends DisabledProps,\n        Omit<DropdownMenuProps, 'children' | 'onKeyDown' | 'onBlur'>,\n        PickOptional<\n            DropdownPopupProps,\n            'isOpen' | 'placement' | 'trigger' | 'offsetTop' | 'onToggle' | 'onKeyDown' | 'onBlur'\n        > {}\n\n/**\n * Выпадающий список с внешнего контроля видимости через пропы `isOpen` и `onToggle`.\n */\nexport const DropdownUncontrolled: FC<DropdownUncontrolledProps> = ({\n    id,\n    isOpen,\n    items,\n    children,\n    offsetTop,\n    disabled,\n    style,\n    className,\n    hoverIndex,\n    placement = 'bottom',\n    trigger = 'click',\n    onBlur,\n    onKeyDown,\n    onToggle: onToggleExternal,\n    onItemSelect,\n    ...rest\n}) => {\n    const hasItems = Array.isArray(items) && items.length > 0;\n\n    const onToggle = useCallback(\n        (newIsOpen, event) => {\n            if (newIsOpen && hasItems && !disabled) {\n                onToggleExternal?.(true, event);\n            } else {\n                onToggleExternal?.(false, event);\n            }\n        },\n        [onToggleExternal, disabled, hasItems],\n    );\n\n    return (\n        <DropdownPopup\n            isOpen={isOpen}\n            trigger={trigger}\n            placement={placement}\n            disclosure={children}\n            offsetTop={offsetTop}\n            style={style}\n            className={className}\n            onToggle={onToggle}\n            onKeyDown={onKeyDown}\n            onBlur={onBlur}\n        >\n            <DropdownMenu {...rest} id={id} items={items} hoverIndex={hoverIndex} onItemSelect={onItemSelect} />\n        </DropdownPopup>\n    );\n};\n"],"file":"DropdownUncontrolled.js"}