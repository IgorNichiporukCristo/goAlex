{"version":3,"sources":["../../../src/components/Checkbox/Checkbox.tsx"],"names":["React","forwardRef","useRef","useMemo","styled","css","BaseboxRoot","BaseboxInput","BaseboxTrigger","BaseboxContent","BaseboxContentWrapper","BaseboxLabel","BaseboxDescription","accent","buttonSecondary","tertiary","white","transparent","useForkRef","useUniqId","addFocus","extractTextFrom","Done","Indeterminate","syntheticFocus","ruleset","focused","StyledRoot","$disabled","StyledInput","StyledTrigger","outlineRadius","synthesizeFocus","outlineOffset","StyledContent","StyledLabel","StyledDescription","StyledDone","StyledIndeterminate","Checkbox","ref","id","label","description","indeterminate","disabled","style","className","ariaLabelExternal","rest","inputRef","forkRef","useEffect","current","Boolean","uniqId","uniqLabelId","uniqDescriptionId","checkboxId","ariaLabel"],"mappings":"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","sourcesContent":["import React, { forwardRef, useRef, useMemo } from 'react';\nimport styled, { css, FlattenSimpleInterpolation } from 'styled-components';\nimport {\n    BaseboxRoot,\n    BaseboxInput,\n    BaseboxTrigger,\n    BaseboxContent,\n    BaseboxContentWrapper,\n    BaseboxLabel,\n    BaseboxDescription,\n    accent,\n    buttonSecondary,\n    tertiary,\n    white,\n    transparent,\n    useForkRef,\n    useUniqId,\n    addFocus,\n} from '@sberdevices/plasma-core';\nimport type { BaseboxProps } from '@sberdevices/plasma-core';\n\nimport { extractTextFrom } from '../../utils';\n\nimport { Done, Indeterminate } from './Icons';\n\nexport interface CheckboxProps extends BaseboxProps {\n    /**\n     * Неопределенное состояние компонента - когда часть потомков не выбрана.\n     */\n    indeterminate?: boolean;\n}\n\nexport const syntheticFocus = (ruleset: FlattenSimpleInterpolation, focused?: boolean) => css`\n    input[data-focus-visible-added] + label & {\n        outline: none;\n        ${ruleset}\n    }\n\n    ${focused && ruleset};\n`;\nexport const StyledRoot = styled(BaseboxRoot)<{ $disabled?: boolean }>`\n    /* stylelint-disable-next-line number-max-precision */\n    margin-left: 0.1875rem; /* FixMe: Выпилить, v2.0 Привести к единому стилю с UI */\n    /* stylelint-disable-next-line number-max-precision */\n    margin-bottom: 0.1875rem; /* FixMe: Выпилить, v2.0 Привести к единому стилю с UI */\n\n    ${({ $disabled }) => $disabled && 'cursor: not-allowed;'}\n`;\nexport const StyledInput = styled(BaseboxInput)`\n    /* Спрятать от IE */\n    width: 1px;\n    height: 1px;\n    overflow: hidden;\n    clip: rect(0 0 0 0);\n`;\n\nexport const StyledTrigger = styled(BaseboxTrigger)<{ outlineRadius?: string }>`\n    /* stylelint-disable-next-line number-max-precision */\n    margin: 0.1875rem 0; /* FixMe: Выпилить, v2.0 Привести к единому стилю с UI */\n    width: 1.125rem;\n    height: 1.125rem;\n\n    background: ${transparent};\n    border: 0.125rem solid ${tertiary};\n    border-radius: 0.25rem;\n    color: ${tertiary};\n    flex-shrink: 0;\n    flex-grow: 0;\n\n    /* stylelint-disable-next-line */\n    input[type='checkbox']:indeterminate + label & {\n        background: ${transparent};\n        border-color: ${accent};\n        color: ${accent};\n    }\n\n    /* stylelint-disable-next-line */\n    input:disabled + label & {\n        background: ${buttonSecondary};\n        border-color: ${transparent};\n        color: ${transparent};\n        cursor: inherit;\n    }\n\n    /* stylelint-disable-next-line */\n    input:checked + label & {\n        background: ${accent};\n        border-color: ${accent};\n        color: ${white};\n    }\n\n    /* stylelint-disable-next-line */\n    input:checked:disabled + label & {\n        background: ${buttonSecondary};\n        border-color: ${transparent};\n        color: ${tertiary};\n    }\n\n    ${({ outlineRadius = '0.25rem' }) => css`\n        ${addFocus({\n            synthesizeFocus: syntheticFocus,\n            outlineOffset: '0.25rem',\n            outlineRadius,\n        })}\n    `}\n`;\nexport const StyledContent = styled(BaseboxContent)`\n    margin-left: 0.875rem;\n\n    /* stylelint-disable-next-line */\n    input:disabled + label & {\n        opacity: 0.4;\n    }\n`;\nexport const StyledLabel = styled(BaseboxLabel)`\n    line-height: 1.5rem;\n`;\nexport const StyledDescription = styled(BaseboxDescription)`\n    /* stylelint-disable-next-line */\n    input:disabled + label & {\n        opacity: 0.4;\n    }\n`;\nconst StyledDone = styled(Done)`\n    position: absolute;\n    top: -0.125rem;\n    left: -0.125rem;\n\n    transform: scale(0);\n    transition: transform 0.15s ease-in-out;\n\n    /* stylelint-disable-next-line */\n    input:checked + label ${BaseboxTrigger} & {\n        transform: scale(1);\n    }\n`;\nconst StyledIndeterminate = styled(Indeterminate)`\n    position: absolute;\n    top: -0.125rem;\n    left: -0.125rem;\n`;\n\n/**\n * Флажок или *чекбокс*. Позволяет пользователю управлять параметром с двумя состояниями — ☑ включено и ☐ отключено.\n */\n// eslint-disable-next-line prefer-arrow-callback\nexport const Checkbox = forwardRef<HTMLInputElement, CheckboxProps>(function Checkbox(\n    { id, label, description, indeterminate, disabled, style, className, 'aria-label': ariaLabelExternal, ...rest },\n    ref,\n) {\n    const inputRef = useRef<HTMLInputElement | null>(null);\n    const forkRef = useForkRef(inputRef, ref);\n\n    React.useEffect(() => {\n        if (inputRef.current) {\n            inputRef.current.indeterminate = Boolean(indeterminate);\n        }\n    }, [inputRef, indeterminate]);\n\n    const uniqId = useUniqId();\n    const uniqLabelId = useUniqId();\n    const uniqDescriptionId = useUniqId();\n    const checkboxId = id || uniqId;\n    const ariaLabel = useMemo(() => ariaLabelExternal || extractTextFrom(label), [ariaLabelExternal, label]);\n\n    return (\n        <StyledRoot $disabled={disabled} style={style} className={className} tabIndex={-1}>\n            <StyledInput\n                {...rest}\n                id={checkboxId}\n                ref={forkRef}\n                type=\"checkbox\"\n                disabled={disabled}\n                aria-label={ariaLabel}\n                aria-describedby={uniqDescriptionId}\n            />\n            <BaseboxContentWrapper htmlFor={checkboxId}>\n                <StyledTrigger>{indeterminate ? <StyledIndeterminate /> : <StyledDone />}</StyledTrigger>\n                {label && (\n                    <StyledContent>\n                        <StyledLabel as=\"span\" id={uniqLabelId} aria-hidden={typeof label === 'string'}>\n                            {label}\n                        </StyledLabel>\n                        {description && (\n                            <BaseboxDescription mt={4} id={uniqDescriptionId}>\n                                {description}\n                            </BaseboxDescription>\n                        )}\n                    </StyledContent>\n                )}\n            </BaseboxContentWrapper>\n        </StyledRoot>\n    );\n});\n"],"file":"Checkbox.js"}