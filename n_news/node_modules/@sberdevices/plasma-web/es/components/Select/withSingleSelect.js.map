{"version":3,"sources":["../../../src/components/Select/withSingleSelect.tsx"],"names":["React","forwardRef","useCallback","useMemo","flattenItemsRecursive","setActiveRecursive","withSingleSelect","View","ref","value","items","onChange","rest","isActive","item","viewValue","find","label","viewItems","onItemSelect"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,WAA5B,EAAyCC,OAAzC,QAAwD,OAAxD;AAGA,SAASC,qBAAT,EAAgCC,kBAAhC,QAA0D,gBAA1D;;AAeA;AACA;AACA;AACA,OAAO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,IAAD;AAAA,sBAC5BN,UAAU,CAAsC,gBAA2CO,GAA3C,EAAmD;AAAA,QAAhDC,KAAgD,QAAhDA,KAAgD;AAAA,0BAAzCC,KAAyC;AAAA,QAAzCA,KAAyC,2BAAjC,EAAiC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAhBC,IAAgB;;AAC/F,QAAMC,QAAQ,GAAGX,WAAW,CAAC,UAACY,IAAD;AAAA,aAAUA,IAAI,CAACL,KAAL,KAAeA,KAAzB;AAAA,KAAD,EAAiC,CAACA,KAAD,CAAjC,CAA5B;AAEA,QAAMM,SAAS,GAAGZ,OAAO,CAAC;AAAA;;AAAA,gEAAMC,qBAAqB,CAACM,KAAD,CAArB,CAA6BM,IAA7B,CAAkCH,QAAlC,CAAN,2DAAM,uBAA6CI,KAAnD,yEAA4D,EAA5D;AAAA,KAAD,EAAiE,CACtFR,KADsF,EAEtFC,KAFsF,EAGtFG,QAHsF,CAAjE,CAAzB;AAMA,QAAMK,SAAS,GAAGf,OAAO,CAAC;AAAA,aAAME,kBAAkB,CAACK,KAAD,EAAQG,QAAR,CAAxB;AAAA,KAAD,EAA4C,CAACJ,KAAD,EAAQC,KAAR,EAAeG,QAAf,CAA5C,CAAzB;AAEA,QAAMM,YAAY,GAAGjB,WAAW,CAAC,UAACY,IAAD;AAAA,aAAUH,QAAV,aAAUA,QAAV,uBAAUA,QAAQ,CAAGG,IAAI,CAACL,KAAR,CAAlB;AAAA,KAAD,EAAmC,CAACE,QAAD,CAAnC,CAAhC;AAEA,wBAAO,oBAAC,IAAD,eAAUC,IAAV;AAAgB,MAAA,GAAG,EAAEJ,GAArB;AAA0B,MAAA,KAAK,EAAEO,SAAjC;AAA4C,MAAA,KAAK,EAAEG,SAAnD;AAA8D,MAAA,YAAY,EAAEC;AAA5E,OAAP;AACH,GAdS,CADkB;AAAA,CAAzB","sourcesContent":["import React, { forwardRef, useCallback, useMemo } from 'react';\nimport type { ComponentType, RefAttributes } from 'react';\n\nimport { flattenItemsRecursive, setActiveRecursive } from './Select.utils';\nimport type { SelectRefElement } from './SelectButton';\nimport type { SelectViewProps } from './SelectView';\n\nexport interface SingleSelectProps extends Omit<SelectViewProps, 'onItemClick' | 'value' | 'label' | 'multiselect'> {\n    /**\n     * Значение контрола.\n     */\n    value: string | number | null;\n    /**\n     * Обработчик изменения значения.\n     */\n    onChange?: (value: string | number | null) => void;\n}\n\n/**\n * Выпадающий список с возможностью выбора одного значения.\n */\nexport const withSingleSelect = (View: ComponentType<SelectViewProps & RefAttributes<SelectRefElement>>) =>\n    forwardRef<SelectRefElement, SingleSelectProps>(({ value, items = [], onChange, ...rest }, ref) => {\n        const isActive = useCallback((item) => item.value === value, [value]);\n\n        const viewValue = useMemo(() => flattenItemsRecursive(items).find(isActive)?.label ?? '', [\n            value,\n            items,\n            isActive,\n        ]);\n\n        const viewItems = useMemo(() => setActiveRecursive(items, isActive), [value, items, isActive]);\n\n        const onItemSelect = useCallback((item) => onChange?.(item.value), [onChange]);\n\n        return <View {...rest} ref={ref} value={viewValue} items={viewItems} onItemSelect={onItemSelect} />;\n    });\n"],"file":"withSingleSelect.js"}